. 系统体系结构	
	app
	|
	posix
	|
	kernel
	|(char)
	driver
	|
	hw

. register:
	Documentation/devices.txt
	cat /proc/devices

. open

. read/write
	__user
	copy_to_user
	copy_from_user

. app->kernel->driver->hw

. 容错
	. goto
	. errno:
		linux/errno.h
			asm/errno.h
				asm-generic/errno.h
					asm-generic/errno-base.h
						
. ioctl
	Documentation/ioctl/ioctl-number.txt

. private_data 
	container_of	

. lseek

. 睡眠机制
	#include <linux/wait.h>
	wait_queue_head_t q;
	init_waitqueue_head(&q);

	if(wait_event_interruptible(dev->q, (dev->cur_size > 0)))
	        return -ERESTARTSYS;


	wake_up();

. poll

. signal/fasync
	#include <linux/signal.h>
	struct fasync_struct *fa;

	注册
	fasync_helper(fd, filp, on, &dev->fa);

	通知
	kill_fasync(&dev->fa, SIGIO, POLL_IN);




