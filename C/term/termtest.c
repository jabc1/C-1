#include "myhead.h"

const int brick_num[7][4][4][4] = \
{\
{\
   {{2,0,0,0},{0,0,9,0},{0,0,9,0},{0,0,9,9}},\
   {{1,0,0,0},{0,0,0,0},{0,9,9,9},{0,9,0,0}},\
   {{2,0,0,0},{0,0,9,9},{0,0,0,9},{0,0,0,9}},\
   {{1,0,0,0},{0,0,0,0},{0,0,0,9},{0,9,9,9}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
},\
{\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}},\
   {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}}\
}\
};

int main(void)
{
	struct termios old, new;
   int ret, way;

	tcgetattr(0, &old);
	tcgetattr(0, &new);

	new.c_lflag &= ~(ICANON | ECHO);
	new.c_cc[VTIME] = 0;
	new.c_cc[VMIN] = 1;

	tcsetattr(0, TCSANOW, &new);

   ret = fb_open();
   if (ret != 0) {
	fprintf(stderr, "fb_open() error.\n");
		exit(1);
   }
	
	init_board();
	
	while ((way = read_key()) != -1) {
		move_box(way);
	}

   fb_close();
	tcsetattr(0, TCSANOW, &old);

	return 0;
}
